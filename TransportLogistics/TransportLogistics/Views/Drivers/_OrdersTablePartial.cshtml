@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@using TransportLogistics.ViewModels.Drivers
@model CurrentRouteViewModel
<table id="Orders" class="table table-striped table-bordered" style="width:100%">
    <thead>
        <tr>
            <th>PickUpAddress</th>
            <th>DeliveryAddress</th>
            <th>Status</th>
            <td>Payment</td>
        </tr>
    </thead>
    <tbody>
        @if (Model.RouteEntries != null)
        {
            var i = Model.RouteEntries.Count;
            foreach (var routeEntry in Model.RouteEntries)
            {
                //TransportLogistics.Model.OrderStatus orderStatus = TransportLogistics.Model.OrderStatus.PickedUp;
                //if(routeEntry.Order.Status == TransportLogistics.Model.OrderStatus.PickedUp)
                //{
                //    orderStatus = TransportLogistics.Model.OrderStatus.Delivered;
                //}
                if (routeEntry.Order.Status == TransportLogistics.Model.OrderStatus.Delivering)
                {
                    routeEntry.Order.SetStatus(TransportLogistics.Model.OrderStatus.Delivered);
                }
                if (routeEntry.Order.Status == TransportLogistics.Model.OrderStatus.Created ||
                routeEntry.Order.Status == TransportLogistics.Model.OrderStatus.Assigned)
                {
                    routeEntry.Order.SetStatus(TransportLogistics.Model.OrderStatus.PickedUp);
                }

        <tr>
           
           
            <td>@routeEntry.Order.PickUpAddress.Country, @routeEntry.Order.PickUpAddress.City,@routeEntry.Order.PickUpAddress.Street,@routeEntry.Order.PickUpAddress.StreetNumber</td>
            
           
          
                <td>@routeEntry.Order.DeliveryAddress.Country,@routeEntry.Order.DeliveryAddress.City,@routeEntry.Order.DeliveryAddress.Street,@routeEntry.Order.DeliveryAddress.StreetNumber</td>
           
            <td style="text-align:center"><a class="btn bg-menu" id="@i" data-ajax="true"  asp-controller="Drivers" asp-action="SetOrderStatus" asp-route-driverId="@Model.DriverId" 
                   asp-route-orderId="@routeEntry.Order.Id" asp-route-status="@routeEntry.Order.Status"  onclick="StatusUpdate(this.id)"
                   >
                @routeEntry.Order.Status </a></td>
            <td>@routeEntry.Order.Price</td>
        </tr>
                i--; }  }
       
    </tbody>
</table>

<script>
  
   

</script>