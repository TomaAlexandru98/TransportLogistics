@using TransportLogistics.ViewModels.Orders
@model NewOrderViewModel
@{
    ViewData["Title"] = "Test";
}

<div class="form-group text-center">
    <label asp-for="SenderId"></label>
    <div>
        <select style="min-width: 60%" asp-for="SenderId" asp-items="@Model.CustomerList"
                ondblclick="LoadDropdown('#SenderId')" onchange="LoadDropdown('#SenderId')">
        </select>
    </div>
    <span asp-validation-for="SenderId" class="text-danger"></span>
</div>

<div class="form-group text-center">
    <label asp-for="PickupLocationId"></label>
    <div>
        <select style="min-width: 60%" asp-for="PickupLocationId" asp-items="@Model.PickupLocations"
                onchange="LoadDropdown('#SenderId', '#PickupLocationId', '#DeliveryLocationId', 'pickup', '@Model.BonusLocationType')">
        </select>

        <button type="button" id="addPickupButton" class="btn btn-add-blue-small ml-3 mb-2">
            <i class="fa fa-plus"></i>
        </button>
    </div>
    <span asp-validation-for="PickupLocationId" class="text-danger"></span>
</div>

<div class="form-group text-center">
    <label asp-for="DeliveryLocationId"></label>
    <div>
        <select style="min-width: 60%" asp-for="DeliveryLocationId" asp-items="@Model.DeliveryLocations"
                onchange="LoadDropdown('#SenderId', '#DeliveryLocationId', '#PickupLocationId', 'delivery', '@Model.BonusLocationType')">
        </select>

        <button type="button" id="addDeliveryButton" class="btn btn-add-blue-small ml-3 mb-2">
            <i class="fa fa-plus"></i>
        </button>
    </div>
    <span asp-validation-for="DeliveryLocationId" class="text-danger"></span>
</div>

<script>

    $('#addPickupButton').click(function () {
        $('#bonusLocation').toggle();

        @if (Model.BonusLocationType == null) {
            @* || Model.BonusLocationType.Equals(NewOrderViewModel.LocationType.None.ToString())) {
            Model.BonusLocationType = NewOrderViewModel.LocationType.Pickup.ToString();*@
            Model.PickupLocationId = null;
        } else
        {
            Model.BonusLocationType = NewOrderViewModel.LocationType.None.ToString();
        }
    });

    $('#addDeliveryButton').click(function () {
        $('#bonusLocation').toggle();
        @if (Model.BonusLocationType == null || Model.BonusLocationType.Equals(NewOrderViewModel.LocationType.None.ToString())) {
            Model.BonusLocationType = NewOrderViewModel.LocationType.Delivery.ToString();
            Model.DeliveryLocationId = null;
        } else
        {
            Model.BonusLocationType = NewOrderViewModel.LocationType.None.ToString();
        }
    });
</script>

<div id="bonusLocation" style="display:none">
    <div class="form-group">
        <label asp-for="NewLocation.Country"></label>
        <input asp-for="NewLocation.Country" type="text" class="form-control" />
        <span asp-validation-for="NewLocation.Country" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="NewLocation.City"></label>
        <input asp-for="NewLocation.City" type="text" class="form-control" />
        <span asp-validation-for="NewLocation.City" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="NewLocation.Street"></label>
        <input asp-for="NewLocation.Street" type="text" class="form-control" />
        <span asp-validation-for="NewLocation.Street" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="NewLocation.StreetNumber"></label>
        <input asp-for="NewLocation.StreetNumber" type="number" class="form-control" />
        <span asp-validation-for="NewLocation.StreetNumber" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="NewLocation.PostalCode"></label>
        <input asp-for="NewLocation.PostalCode" type="text" class="form-control" />
        <span asp-validation-for="NewLocation.PostalCode" class="text-danger"></span>
    </div>
</div>

<div class="form-group">
    <label asp-for="RecipientName"></label>
    <input asp-for="RecipientName" type="text" class="form-control" />
    <span asp-validation-for="RecipientName" class="text-danger"></span>
</div>

<div class="form-group">
    <label asp-for="RecipientEmail"></label>
    <input asp-for="RecipientEmail" type="email" class="form-control" />
    <span asp-validation-for="RecipientEmail" class="text-danger"></span>
</div>

<div class="form-group">
    <label asp-for="RecipientPhoneNo"></label>
    <input asp-for="RecipientPhoneNo" type="tel" class="form-control" />
    <span asp-validation-for="RecipientPhoneNo" class="text-danger"></span>
</div>

<div class="form-group">
    <label asp-for="Price"></label>
    <input asp-for="Price" type="number" class="form-control" />
    <span asp-validation-for="Price" class="text-danger"></span>
</div>

@*
    <partial>
        @await Html.PartialAsync("~/Views/Customers/_AddLocationPartial.cshtml",
            Model.NewLocation)
    </partial>
*@